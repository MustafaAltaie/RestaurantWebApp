<!DOCTYPE html>
<html>
    <title>HyresAvi</title>
    <body>
        {{#each clientList}}
        <input type="hidden" value="{{this._id}}" class="name_IdDB">
        <input type="hidden" value="{{this.name}}" class="nameDB">
        <input type="hidden" value="{{this.homeNumber}}" class="homeNumberDB">
        <input type="hidden" value="{{this.cityName}}" class="cityNameDB">
        <input type="hidden" value="{{this.cityNumber}}" class="cityNumberDB">
        <input type="hidden" value="{{this.rent}}" class="rentDB">
        <input type="hidden" value="{{this.streetName}}" class="streetNameDB">
        <input type="hidden" value="{{this.streetNumber}}" class="streetNumberDB">
        {{/each}}

        <form action="/newClient" method="POST">
            <input name="name" placeholder="Namn" class="inputBox">
            <input name="homeNumber" placeholder="Lägenhet nummer" class="inputBox">
            <input name="cityName" placeholder="Ort namn" class="inputBox">
            <input name="cityNumber" placeholder="Ort nummer" class="inputBox">
            <input name="rent" placeholder="Hyra" class="inputBox">
            <input name="streetName" placeholder="Gatu namn" class="inputBox">
            <input name="streetNumber" placeholder="Gatu nummer" class="inputBox">
            <button id="sbmt">Lägg till hyresgästen</button>
        </form>

        <div id="allNames">
            <h1>Ta bort hyresgäst</h1>
        </div>
    </body>
        
    <style>
        #allNames{
            z-index: 100;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 500px;
            background: #111;
            color: #fff;
            text-align: center;
            padding: 10px;
        }
        #allNames > button{
            padding: 10px;
            margin: 10px;
            cursor: pointer;
        }
        #allNames > button:hover{
            background: #c00;
            color: white;
        }
        input, #sbmt{
            padding: 10px;
            margin: 10px;
            font-size: 20px;
        }
    </style>

    <script>
        if(document.getElementsByClassName('name_IdDB').length != 0)
        for(i = 0; i < document.getElementsByClassName('name_IdDB').length; i++){
            var button1 = document.createElement('button');
            button1.className = 'renters';
            button1.idAddress = document.getElementsByClassName('name_IdDB')[i].value;
            button1.innerHTML = document.getElementsByClassName('nameDB')[i].value;
            button1.name = document.getElementsByClassName('nameDB')[i].value;
            button1.homeNumber = document.getElementsByClassName('homeNumberDB')[i].value;
            button1.cityName = document.getElementsByClassName('cityNameDB')[i].value;
            button1.cityNumber = document.getElementsByClassName('cityNumberDB')[i].value;
            button1.rent = document.getElementsByClassName('rentDB')[i].value;
            button1.streetName = document.getElementsByClassName('streetNameDB')[i].value;
            button1.streetNumber = document.getElementsByClassName('streetNumberDB')[i].value;
            allNames.appendChild(button1);
        }

        document.addEventListener('click', function(evt){
            if(evt.target.className == 'renters')
            if(confirm('Säkert du vill ta bort ' + evt.target.name + ' ?') == true)
            window.location.href = '/deleteClient/' + evt.target.idAddress;
        });
        
        document.getElementById('sbmt').onclick = function(){
            sbmt.style.display = 'none';
        }

    </script>
</html>